<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>List Your Business for Free | ServeKerala.in</title>

  <!-- Mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO -->
  <meta name="description" content="List your local business on ServeKerala.in for free. Get direct calls and WhatsApp leads. No commission. Manual review." />
  <meta name="keywords" content="list business kerala, free business listing kerala" />
  <meta name="author" content="ServeKerala.in" />

  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="icon" href="/favicon.ico" />

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5Q3X8BNF');
  </script>
</head>

<body>

<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q3X8BNF"
  height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>

<!-- ================= HEADER ================= -->
<header class="site-header">
  <div class="container header-inner">
    <div class="logo"><a href="/">ServeKerala</a></div>

    <nav class="main-nav" id="mainNav">
      <a href="/">Home</a>
      <a href="/services/">Services</a>
      <a href="/businesses/">Businesses</a>
      <a href="/events/">Events</a>
      <a href="/offers/">Offers</a>
      <a href="/districts/">Districts</a>
      <a href="/list-your-business/" class="active btn btn-primary">Add Listing</a>
      <a href="/contact/">Contact</a>
    </nav>

    <button class="menu-toggle" id="menuToggle">☰</button>
  </div>
</header>

<!-- ================= HERO ================= -->
<section class="hero">
  <div class="container hero-content">
    <h1>Request a Business Listing</h1>
    <p>100% free for 1 year • Manual review • No commission</p>
  </div>
</section>

<!-- ================= FORM ================= -->
<section class="section">
  <div class="container">

    <form class="listing-form" id="listingForm">

      <!-- BUSINESS DETAILS -->
      <h3>Business Details</h3>
      <div class="form-grid">
        <input type="text" name="businessName" placeholder="Business Name *" required>

        <!-- CATEGORY DROPDOWN -->
        <select id="categorySelect" required>
          <option value="">Select Category *</option>
        </select>

        <input type="tel" name="phone" placeholder="Phone Number *" required>
        <input type="tel" name="whatsapp" placeholder="WhatsApp Number">
        <input type="url" name="website" placeholder="Website (optional)">
      </div>

      <!-- LOCATION -->
      <h3>Location</h3>
      <div class="form-grid">
        <select id="districtSelect" required>
          <option value="">Select District *</option>
        </select>

        <select id="citySelect" disabled required>
          <option value="">Select City / Town *</option>
        </select>

        <select id="areaSelect" disabled required>
          <option value="">Select Area / Locality *</option>
        </select>
      </div>

      <!-- SERVICES -->
      <h3>Services / Products</h3>
      <textarea name="services" rows="4"
        placeholder="List main services or products (short)"></textarea>

      <label class="form-check">
        <input type="checkbox" required>
        I confirm that the above information is correct.
      </label>

      <button type="submit" class="btn btn-primary btn-full">
        Submit Request
      </button>

      <p class="form-note">
        All listings are manually reviewed before publishing.
      </p>
    </form>

  </div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="site-footer">
  <div class="container footer-inner">
    <p class="footer-note">© ServeKerala.in – Kerala Connect</p>
  </div>
</footer>

<!-- ================= SCRIPTS ================= -->
<script type="module" src="/assets/js/firebase-init.js"></script>
<script type="module" src="/assets/js/dropdown-loader.js"></script>

<script type="module">
  import { db } from "/assets/js/firebase-init.js";
  import { collection, addDoc, serverTimestamp }
    from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const form = document.getElementById("listingForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = {
      businessName: form.businessName.value,
      phone: form.phone.value,
      whatsapp: form.whatsapp.value || "",
      website: form.website.value || "",
      services: form.services.value || "",

      categoryId: categorySelect.value,
      categoryName: categorySelect.options[categorySelect.selectedIndex].text,

      districtId: districtSelect.value,
      districtName: districtSelect.options[districtSelect.selectedIndex].text,

      cityId: citySelect.value,
      cityName: citySelect.options[citySelect.selectedIndex].text,

      areaId: areaSelect.value,
      areaName: areaSelect.options[areaSelect.selectedIndex].text,

      status: "pending",
      createdAt: serverTimestamp()
    };

    try {
      await addDoc(collection(db, "listing_requests"), data);
      alert("✅ Listing request submitted successfully.");
      form.reset();
    } catch (err) {
      alert("❌ Submission failed. Please try again.");
      console.error(err);
    }
  });
</script>

</body>
</html>
